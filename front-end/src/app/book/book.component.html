<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

 <!-- Masthead-->
 <header class="masthead bg-primary text-white text-center">
   <div *ngFor = "let book of bookService.book | async">
     <div class="container d-flex align-items-center flex-column">
         <!-- Masthead Avatar Image-->
         <img class="masthead-avatar mb-5" src="{{book.image}}" alt=""/>
         <!-- Masthead Heading-->
         <h1 class="masthead-heading text-uppercase mb-0">{{book.title}}</h1>
         <!-- Icon Divider-->
         <div class="divider-custom divider-light">
             <div class="divider-custom-line"></div>
             <div class="divider-custom-icon"><i class="fa fa-star"></i></div>
             <div class="divider-custom-line"></div>
         </div>
         <!-- Masthead Subheading-->
         <p class="masthead-subheading font-weight-light mb-0">{{book.author}} <br>Published: {{book.date}} <br>Pages: {{book.pages}}<br> {{book.description}}</p>
    </div>
     <!-- <button type="button" mdbBtn color="primary" class="relative waves-light"  (click)="checkInDB(book.isbn)" *ngIf="authService.loggedIn" mdbWavesEffect>Test - Check in DB</button> -->
    <div class="btn-group" mdbDropdown *ngIf="authService.loggedIn">
      <button mdbDropdownToggle type="button" mdbBtn color="primary" class="dropdown-toggle waves-light" (click)="addToDB(book)"
        mdbWavesEffect>
        Add to shelf
      </button>
      <div class="dropdown-menu dropdown-primary">
        <a class="dropdown-item" (click)="addToCurrentlyReading(book)">Currently Reading</a>
        <div class="divider dropdown-divider"></div>
        <a class="dropdown-item" (click)="addToHasRead(book)">Read</a>
        <div class="divider dropdown-divider"></div>
        <a class="dropdown-item" (click)="addToWantToRead(book)">Want to Read</a>
      </div>
    </div>   
  </div>
 </header>
 <!-- reviews Section-->
 <section class="page-section reviews" id="reviews">
     <div class="container">
         <!-- reviews Section Heading-->
         <h2 class="page-section-heading text-center text-uppercase text-secondary mb-0">Reviews</h2>
         <!-- Icon Divider-->
         <div class="divider-custom">
             <div class="divider-custom-line"></div>
             <div class="divider-custom-icon"><i class="fa fa-star"></i></div>
             <div class="divider-custom-line"></div>
         </div>
         <!-- reviews Grid Items-->
         <div class="col text-center" *ngFor = "let book of bookService.book | async">
         <button type="button" mdbBtn color="primary" class="relative waves-light" (click)="addToDB(book); basicModal.show();" *ngIf="authService.loggedIn" mdbWavesEffect>Add Review</button>
     </div>
         <div *ngFor = "let review of reviewService.reviews_list | async">
         <div class="row justify-content-center">
             <!-- reviews Item 1-->
             <div class="col-md-6 col-lg-8 mb-5">
                     <div class="reviews-item-caption d-flex h-100 w-100">
                         <div class="reviews-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                         <img src={{review.reviewer_image}} class="rounded-circle img-fluid profile-picture" style="width:65px;height:65px;cursor:pointer" alt="Image" routerLink='/user/{{review.reviewer_id}}'> &nbsp;
                         <p>{{review.text}} 
                           <br>
                           <b>{{review.rating}} stars </b>
                           <br>
                           Posted by {{review.reviewer_name}}
                           <br>
                           {{review.likes.count}} likes
                           <button type="button" class="btn btn-success btn-sm" (click)="likeReview(review.review_id)" *ngIf="!this.isOwnReview(review)"><img src="https://img.icons8.com/dusk/50/000000/facebook-like.png" width=24px/></button>
                           <button type="button" class="btn btn-danger btn-sm" (click)="deleteModal.show()" *ngIf="this.isOwnReview(review)">Delete</button> 
                         </p>
                     </div> 
                     <div mdbModal #deleteModal="mdbModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myDeleteModalLabel" aria-hidden="true">
                      <div class="modal-dialog" role="document">
                        <div class="modal-content">
                          <div class="modal-header">
                            <button type="button" class="close pull-right" aria-label="Close" (click)="deleteModal.hide()">
                              <span aria-hidden="true">×</span>
                            </button>
                            <h4 class="modal-title w-100" id="myModalLabel">Confirm Deletion</h4>
                          </div>
                          <div class="modal-body">
                    
                          Are you sure you want to delete this review?
                    
                          </div>
                          <div class="modal-footer">
                            <button type="button" mdbBtn color="primary" class="waves-light" aria-label="Close" (click)="deleteModal.hide()" mdbWavesEffect>Cancel</button>
                            <button type="button" mdbBtn color="danger" class="relative waves-light" (click)="deleteReview(review.review_id); deleteModal.hide()" mdbWavesEffect>Delete</button>
                          </div>
                        </div>
                      </div>
                    </div>
             </div>
         </div>
     </div>
     </div>
 </section>
 
 <!-- Footer-->
 <footer class="footer text-center">
     <div class="container">
         <div class="row">
             <!-- Footer Location-->
             <div class="col-lg-4 mb-5 mb-lg-0">
                 <h4 class="text-uppercase mb-4">Location</h4>
                 <p class="lead mb-0">
                     2215 John Daniel Drive
                     <br />
                     Clark, MO 65243
                 </p>
             </div>
             <!-- Footer Social Icons-->
             <div class="col-lg-4 mb-5 mb-lg-0">
                 <h4 class="text-uppercase mb-4">Around the Web</h4>
                 <a class="btn btn-outline-light btn-social mx-1" href="#!"><i class="fab fa-fw fa-facebook-f"></i></a>
                 <a class="btn btn-outline-light btn-social mx-1" href="#!"><i class="fab fa-fw fa-twitter"></i></a>
                 <a class="btn btn-outline-light btn-social mx-1" href="#!"><i class="fab fa-fw fa-linkedin-in"></i></a>
                 <a class="btn btn-outline-light btn-social mx-1" href="#!"><i class="fab fa-fw fa-dribbble"></i></a>
             </div>
             <!-- Footer About Text-->
             <div class="col-lg-4">
                 <h4 class="text-uppercase mb-4">About Freelancer</h4>
                 <p class="lead mb-0">
                     Freelance is a free to use, MIT licensed Bootstrap theme created by
                     <a href="http://startbootstrap.com">Start Bootstrap</a>
                     .
                 </p>
             </div>
         </div>
     </div>
 </footer>
 
 <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes)-->
 <div class="scroll-to-top d-lg-none position-fixed">
     <a class="js-scroll-trigger d-block text-center text-white rounded" href="#page-top"><i class="fa fa-chevron-up"></i></a>
 </div>

        <div mdbModal #basicModal="mdbModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myBasicModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close pull-right" aria-label="Close" (click)="basicModal.hide()">
                  <span aria-hidden="true">×</span>
                </button>
                <h4 class="modal-title w-100" id="myModalLabel">Review</h4>
              </div>
              <div class="modal-body">
        
                <form [formGroup]="reviewForm">
                <div class="form-group">
                  <fieldset class="rating">
                      <input type="radio" id="star5" name="rating" value="5" formControlName="rating"/><label class = "full" for="star5" title="5 stars"></label>
                      <input type="radio" id="star4half" name="rating" value="4.5" formControlName="rating"/><label class="half" for="star4half" title="4.5 stars"></label>
                      <input type="radio" id="star4" name="rating" value="4" formControlName="rating"/><label class = "full" for="star4" title="4 stars"></label>
                      <input type="radio" id="star3half" name="rating" value="3.5" formControlName="rating"/><label class="half" for="star3half" title="3.5 stars"></label>
                      <input type="radio" id="star3" name="rating" value="3" formControlName="rating"/><label class = "full" for="star3" title="3 stars"></label>
                      <input type="radio" id="star2half" name="rating" value="2.5" formControlName="rating" /><label class="half" for="star2half" title="2.5 stars"></label>
                      <input type="radio" id="star2" name="rating" value="2" formControlName="rating" /><label class = "full" for="star2" title="2 stars"></label>
                      <input type="radio" id="star1half" name="rating" value="1.5" formControlName="rating" /><label class="half" for="star1half" title="1.5 stars"></label>
                      <input type="radio" id="star1" name="rating" value="1" formControlName="rating" /><label class = "full" for="star1" title="1 star"></label>
                      <input type="radio" id="starhalf" name="rating" value="0.5" formControlName="rating" /><label class="half" for="starhalf" title="0.5 stars"></label>
                  </fieldset>
                  </div>
        
                  <div class="form-group">
                    <textarea id="review" rows="3" name="review"
                    class="form-control"
                    formControlName="review">
                                </textarea>
                    </div>
                </form>
        
              </div>
              <div class="modal-footer">
                <button type="button" mdbBtn color="danger" class="waves-light" aria-label="Close" (click)="basicModal.hide()" mdbWavesEffect>Cancel</button>
                <button type="button" mdbBtn color="primary" class="relative waves-light" (click)="this.postReview(); basicModal.hide()" mdbWavesEffect>Submit</button>
              </div>
            </div>
          </div>
        </div>
<!-- 
        <div mdbModal #deleteModal="mdbModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myDeleteModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close pull-right" aria-label="Close" (click)="deleteModal.hide()">
                  <span aria-hidden="true">×</span>
                </button>
                <h4 class="modal-title w-100" id="myModalLabel">Confirm Deletion</h4>
              </div>
              <div class="modal-body">
        
              Are you sure you want to delete this review?
        
              </div>
              <div class="modal-footer">
                <button type="button" mdbBtn color="primary" class="waves-light" aria-label="Close" (click)="deleteModal.hide()" mdbWavesEffect>Cancel</button>
                <button type="button" mdbBtn color="danger" class="relative waves-light" mdbWavesEffect>Delete</button>
              </div>
            </div>
          </div>
        </div> -->

        <!-- <div mdbModal #dateModal="mdbModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myDateModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close pull-right" aria-label="Close" (click)="dateModal.hide()">
                  <span aria-hidden="true">×</span>
                </button>
                <h4 class="modal-title w-100" id="myModalLabel">Select Finish Date</h4>
              </div>
              <div class="modal-body"> -->

        <!-- <form>
                <div class="form-group">
                  <textarea id="startDate" rows="1" name="startDate"
                  class="form-control"
                  formControlName="startDate">
                              </textarea>
                  
                  <textarea id="finishDate" rows="1" name="finishDate"
                  class="form-control"
                  formControlName="finishDate">
                              </textarea>
                  </div>
              </form>
         -->
         <!-- <form [formGroup]="dateForm">

         <div class="form-group">
          <label for="month">Month</label>
          <select class="form-control" id="month" formControlName="finishMonth">
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
            <option>6</option>
            <option>7</option>
            <option>8</option>
            <option>9</option>
            <option>10</option>
            <option>11</option>
            <option>12</option>
          </select>

          <label for="day">Day</label>
          <select class="form-control" id="day" formControlName="finishDay">
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
            <option>6</option>
            <option>7</option>
            <option>8</option>
            <option>9</option>
            <option>10</option>
            <option>11</option>
            <option>12</option>
            <option>13</option>
            <option>14</option>
            <option>15</option>
            <option>16</option>
            <option>17</option>
            <option>18</option>
            <option>19</option>
            <option>20</option>
            <option>21</option>
            <option>22</option>
            <option>23</option>
            <option>24</option>
            <option>25</option>
            <option>26</option>
            <option>27</option>
            <option>28</option>
            <option>29</option>
            <option>30</option>
            <option>31</option>
          </select>
        </div>

      </form> -->

              <!-- </div>
              <div class="modal-footer">
                <button type="button" mdbBtn color="danger" class="relative waves-light" mdbWavesEffect>Cancel</button>
                <button type="button" mdbBtn color="primary" class="waves-light" aria-label="Close" (click)="selectDate();dateModal.hide()" mdbWavesEffect>Confirm</button>
              </div>
            </div>
          </div>
        </div> -->